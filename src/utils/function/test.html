<!DOCTYPE html>
<html>

<body>
    <div style="width:200px;height:200px;background-color: red;"></div>
    <script>
        // for (var i = 0; i < 100000; i++) {
        //     add(1, 2, 3)
        // }
        // console.timeEnd('not use memoize')

        // 第二版 (来自 underscore 的实现)
//         var memoize = function (func, hasher) {
//             var memoize = function (key) {
//                 var cache = memoize.cache;
//                 var address = '' + (hasher ? hasher.apply(this, arguments) : key);
//                 if (!cache[address]) {
//                     cache[address] = func.apply(this, arguments);
//                 }
//                 return cache[address];
//             };
//             memoize.cache = {};
//             return memoize;
//         };
//         var add = function (a, b, c) {
//             return a + b + c
//         }
//         var memoizedAdd = memoize(add, function () {
//             var args = Array.prototype.slice.call(arguments)
//             return JSON.stringify(args)
//         })

//         console.log(memoizedAdd(3, 2, 3)) // 6
//         console.log(memoizedAdd(1, 2, 3)) // 6
//         console.log(memoizedAdd(1, 2, 4)) // 7

//         //惰性函数
//         var foo = function(){
//             var t = new Date();
//             foo = function(){
//                 return t;
//             }
//             return foo();
//         }

// function add(a,b){
//     return a+b
// }
// var addOne = add.bind(null,1);
// addOne(2);


// function add(a, b) {
//     return a + b + this.value;
// }

// function partial(fn) {
//     var args = [].slice.call(arguments, 1);
//     return function() {
//         var newArgs = args.concat([].slice.call(arguments));
//         return fn.apply(this, newArgs);
//     };
// };

// var addOne = add.bind(obj, 1);
// // var addOne = partial(add, 1);

// var value = 1;
// var obj = {
//     value: 2,
//     addOne: addOne
// }
// console.log(obj.addOne(2))
// 使用 bind 时，结果为 4
// 使用 partial 时，结果为 5


// var _ = {};
// function partial(fn){
//     var args = [].slice.call(arguments,1);
//     return function(){
//         var position = 0,len = args.length;
//         for(var i = 0;i<len;i++){
//             args[i] = args[i] === _ ? arguments[position++] : args[i]
//         }
//         while(position<arguments.length) args.push(arguments[position++]);
//         return fn.apply(this,args);
//     }
// }
let a = 0, b = 0;
function fn(a) {
  fn = function fn2(b) {
    console.log(a, b)
    console.log(++a+b)
    console.log(a,b)
  }
  console.log('a', a++)
}
fn(1); // a, 1
fn(2); // 2, 2   5
    </script>
</body>

</html>